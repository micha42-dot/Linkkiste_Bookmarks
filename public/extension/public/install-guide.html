<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LinkKiste - Installation Guide</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; color: #333; line-height: 1.6; }
        pre { background: #1e1e1e; color: #f0f0f0; padding: 1rem; border-radius: 6px; overflow-x: auto; font-size: 0.9em; margin: 1rem 0; }
        code { font-family: 'Menlo', 'Monaco', 'Courier New', monospace; }
        h2 { border-bottom: 2px solid #eee; padding-bottom: 0.5rem; margin-top: 2rem; margin-bottom: 1rem; color: #111; font-weight: 700; font-size: 1.5rem; }
        h3 { margin-top: 1.5rem; margin-bottom: 0.5rem; color: #444; font-weight: 600; font-size: 1.25rem; }
        .note { background: #fffbe6; border: 1px solid #ffe58f; padding: 1rem; border-radius: 6px; font-size: 0.9rem; margin: 1rem 0; }
        .step { margin-bottom: 2rem; }
    </style>
</head>
<body class="bg-gray-50 p-6 md:p-12">

    <div class="max-w-3xl mx-auto bg-white p-8 rounded-lg shadow-sm border border-gray-200">
        
        <header class="mb-8 text-center">
            <h1 class="text-3xl font-bold text-blue-600 mb-2">LinkKiste Setup Guide</h1>
            <p class="text-gray-600">How to install your own private bookmarking server.</p>
        </header>

        <section class="step">
            <h2>1. Database Setup (Supabase)</h2>
            <p>LinkKiste requires a backend. We use Supabase (free tier) for the database and authentication.</p>
            <ol class="list-decimal pl-5 space-y-2 mt-4">
                <li>Create a new project at <a href="https://database.new" target="_blank" class="text-blue-600 hover:underline">database.new</a>.</li>
                <li>Go to the <strong>SQL Editor</strong> in the sidebar.</li>
                <li>Copy and paste the code below into the editor and click <strong>Run</strong>.</li>
            </ol>

            <pre><code>-- 1. Create the Bookmarks Table
create table bookmarks (
  id bigint generated by default as identity primary key,
  created_at timestamp with time zone default timezone('utc'::text, now()) not null,
  url text not null,
  title text not null,
  description text,
  tags text[] default '{}',
  folders text[] default '{}',
  notes text,
  to_read boolean default false,
  user_id uuid references auth.users not null default auth.uid()
);

-- 2. Enable Security (Row Level Security)
alter table bookmarks enable row level security;

-- 3. Create Security Policies (Only you can see your data)
create policy "Users can only see their own bookmarks" on bookmarks for select using (auth.uid() = user_id);
create policy "Users can insert their own bookmarks" on bookmarks for insert with check (auth.uid() = user_id);
create policy "Users can update their own bookmarks" on bookmarks for update using (auth.uid() = user_id);
create policy "Users can delete their own bookmarks" on bookmarks for delete using (auth.uid() = user_id);

-- 4. Setup Image Storage for Avatars
insert into storage.buckets (id, name, public) values ('avatars', 'avatars', true);
create policy "Avatar images are publicly accessible" on storage.objects for select using ( bucket_id = 'avatars' );
create policy "Anyone can upload an avatar" on storage.objects for insert with check ( bucket_id = 'avatars' AND auth.role() = 'authenticated' );</code></pre>
        </section>

        <section class="step">
            <h2>2. Get your Keys</h2>
            <p>Once the SQL is run, you need your API keys to connect the app.</p>
            <ol class="list-decimal pl-5 space-y-2 mt-4">
                <li>Go to <strong>Project Settings</strong> (Cog icon) &rarr; <strong>API</strong>.</li>
                <li>Find the <strong>Project URL</strong>.</li>
                <li>Find the <strong>anon public</strong> key.</li>
            </ol>
            <div class="note">
                <strong>Keep these safe!</strong> You will need them in the next step.
            </div>
        </section>

        <section class="step">
            <h2>3. Deployment (Vercel/Cloudflare)</h2>
            <p>You can host the app for free on Vercel or Cloudflare Pages.</p>
            
            <h3>Option A: Vercel</h3>
            <ol class="list-decimal pl-5 space-y-2 mt-4">
                <li>Import the Git repository into Vercel.</li>
                <li>In the configuration screen, open <strong>Environment Variables</strong>.</li>
                <li>Add the following two variables:</li>
            </ol>
            <pre><code>VITE_SUPABASE_URL=https://your-project-id.supabase.co
VITE_SUPABASE_ANON_KEY=your-long-api-key-here</code></pre>
            
            <h3>Option B: Cloudflare Pages</h3>
            <ol class="list-decimal pl-5 space-y-2 mt-4">
                <li>Connect your Git repository.</li>
                <li>Build command: <code>npm run build</code></li>
                <li>Output directory: <code>dist</code></li>
                <li>Add the Environment Variables (same as above).</li>
            </ol>
        </section>

        <section class="step">
            <h2>4. Final Security Step</h2>
            <p>Since this is a private tool, you should disable open registration after you have created your own account.</p>
            <ol class="list-decimal pl-5 space-y-2 mt-4">
                <li>Visit your deployed app and <strong>Sign Up</strong> to create your account.</li>
                <li>Go back to your Supabase Dashboard.</li>
                <li>Navigate to <strong>Authentication</strong> &rarr; <strong>Settings</strong> &rarr; <strong>User Signups</strong>.</li>
                <li>Disable <strong>Allow new users to sign up</strong>.</li>
            </ol>
        </section>

    </div>

</body>
</html>